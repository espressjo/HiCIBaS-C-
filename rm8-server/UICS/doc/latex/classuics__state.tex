\hypertarget{classuics__state}{}\doxysection{uics\+\_\+state Class Reference}
\label{classuics__state}\index{uics\_state@{uics\_state}}


Collaboration diagram for uics\+\_\+state\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=202pt]{classuics__state__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classuics__state_a40c27abc73f074856b5ab15435937c80}\label{classuics__state_a40c27abc73f074856b5ab15435937c80}} 
{\bfseries uics\+\_\+state} (\mbox{\hyperlink{structinstHandle}{inst\+Handle}} $\ast$handle)
\item 
void \mbox{\hyperlink{classuics__state_aa0723e76e6901b77c1654c3d8ca76b14_aa0723e76e6901b77c1654c3d8ca76b14}{run}} (int sockfd)
\begin{DoxyCompactList}\small\item\em main function The run method wait for an incoming command. Once all the check up is OK (cmd exist, argument are ok,...) we check if the requested callback function is defined. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classuics__state_aa2c64860332d9831684e183ad1edd954_aa2c64860332d9831684e183ad1edd954}{add\+\_\+callback}} (const char $\ast$fname, void($\ast$f)(\mbox{\hyperlink{structinstHandle}{inst\+Handle}} $\ast$, \mbox{\hyperlink{classcmd}{cmd}} $\ast$))
\item 
void \mbox{\hyperlink{classuics__state_a036564ebb10a103182a79d9a5b40b748_a036564ebb10a103182a79d9a5b40b748}{execute}} (const char $\ast$fname)
\begin{DoxyCompactList}\small\item\em Description method to execute a standard function. A standard function accept one argument of type cmd, return void and must be 1st set using the add\+\_\+config\+\_\+func method. This method will execute the command named fname with $\ast$cc argument. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classuics__state_aabef364d5d890d5dc8da2f4d79b2c5eb_aabef364d5d890d5dc8da2f4d79b2c5eb}{execute\+Only\+Once}} (S\+T\+A\+TE next\+State)
\item 
\mbox{\Hypertarget{classuics__state_aa074a0eb82f24d7875d60482021f8072}\label{classuics__state_aa074a0eb82f24d7875d60482021f8072}} 
void {\bfseries start\+\_\+with} (const char $\ast$fname)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classuics__state_a70ea9e627e424cfaa0b9325c8786e730}\label{classuics__state_a70ea9e627e424cfaa0b9325c8786e730}} 
std\+::vector$<$ std\+::string $>$ {\bfseries ffname}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 15 of file uics\+\_\+state.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classuics__state_aa2c64860332d9831684e183ad1edd954_aa2c64860332d9831684e183ad1edd954}\label{classuics__state_aa2c64860332d9831684e183ad1edd954_aa2c64860332d9831684e183ad1edd954}} 
\index{uics\_state@{uics\_state}!add\_callback@{add\_callback}}
\index{add\_callback@{add\_callback}!uics\_state@{uics\_state}}
\doxysubsubsection{\texorpdfstring{add\_callback()}{add\_callback()}}
{\footnotesize\ttfamily void uics\+\_\+state\+::add\+\_\+callback (\begin{DoxyParamCaption}\item[{const char $\ast$}]{fname,  }\item[{void($\ast$)(\mbox{\hyperlink{structinstHandle}{inst\+Handle}} $\ast$, \mbox{\hyperlink{classcmd}{cmd}} $\ast$)}]{f }\end{DoxyParamCaption})}

Add a function callback to the class. A standard function accept one argument of type cmd, return void and must be 1st set using the add\+\_\+config\+\_\+func method. 

Definition at line 182 of file uics\+\_\+state.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{188 \{}
\DoxyCodeLine{189     }
\DoxyCodeLine{190     functions.add\_value(fname,f);}
\DoxyCodeLine{191     ffname.push\_back(std::string(fname));}
\DoxyCodeLine{192 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classuics__state_a036564ebb10a103182a79d9a5b40b748_a036564ebb10a103182a79d9a5b40b748}\label{classuics__state_a036564ebb10a103182a79d9a5b40b748_a036564ebb10a103182a79d9a5b40b748}} 
\index{uics\_state@{uics\_state}!execute@{execute}}
\index{execute@{execute}!uics\_state@{uics\_state}}
\doxysubsubsection{\texorpdfstring{execute()}{execute()}}
{\footnotesize\ttfamily void uics\+\_\+state\+::execute (\begin{DoxyParamCaption}\item[{const char $\ast$}]{fname }\end{DoxyParamCaption})}



Description method to execute a standard function. A standard function accept one argument of type cmd, return void and must be 1st set using the add\+\_\+config\+\_\+func method. This method will execute the command named fname with $\ast$cc argument. 



Definition at line 82 of file uics\+\_\+state.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{91 \{}
\DoxyCodeLine{92     void (*f)(\mbox{\hyperlink{structinstHandle}{instHandle}}*,\mbox{\hyperlink{classcmd}{cmd}}*);}
\DoxyCodeLine{93     f = functions[fname];}
\DoxyCodeLine{94     \textcolor{keywordflow}{if} (f!=\textcolor{keyword}{nullptr})}
\DoxyCodeLine{95     \{}
\DoxyCodeLine{96         f(myHandle,cmd2exec);}
\DoxyCodeLine{97     \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99     return ;}
\DoxyCodeLine{100 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classuics__state_aabef364d5d890d5dc8da2f4d79b2c5eb_aabef364d5d890d5dc8da2f4d79b2c5eb}\label{classuics__state_aabef364d5d890d5dc8da2f4d79b2c5eb_aabef364d5d890d5dc8da2f4d79b2c5eb}} 
\index{uics\_state@{uics\_state}!executeOnlyOnce@{executeOnlyOnce}}
\index{executeOnlyOnce@{executeOnlyOnce}!uics\_state@{uics\_state}}
\doxysubsubsection{\texorpdfstring{executeOnlyOnce()}{executeOnlyOnce()}}
{\footnotesize\ttfamily void uics\+\_\+state\+::execute\+Only\+Once (\begin{DoxyParamCaption}\item[{S\+T\+A\+TE}]{next\+State }\end{DoxyParamCaption})}

If this fucntion is called, the \mbox{\hyperlink{classuics__state_aa0723e76e6901b77c1654c3d8ca76b14_aa0723e76e6901b77c1654c3d8ca76b14}{uics\+\_\+state\+::run}} will only execute one function. This functionallity is usefull for the acquisition combine with a idle state. The \mbox{\hyperlink{classuics__state}{uics\+\_\+state(acq)}} only has 1 function; acquisition(). Once the function return, we may tell the \mbox{\hyperlink{classuics__state}{uics\+\_\+state}} to go to another state e.\+g., the idle state 

Definition at line 127 of file uics\+\_\+state.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{137 \{}
\DoxyCodeLine{138     eOO = \textcolor{keyword}{true};}
\DoxyCodeLine{139     eOOnextState = nextState;}
\DoxyCodeLine{140 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classuics__state_aa0723e76e6901b77c1654c3d8ca76b14_aa0723e76e6901b77c1654c3d8ca76b14}\label{classuics__state_aa0723e76e6901b77c1654c3d8ca76b14_aa0723e76e6901b77c1654c3d8ca76b14}} 
\index{uics\_state@{uics\_state}!run@{run}}
\index{run@{run}!uics\_state@{uics\_state}}
\doxysubsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily void uics\+\_\+state\+::run (\begin{DoxyParamCaption}\item[{int}]{sockfd }\end{DoxyParamCaption})}



main function The run method wait for an incoming command. Once all the check up is OK (cmd exist, argument are ok,...) we check if the requested callback function is defined. 



Definition at line 37 of file uics\+\_\+state.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{44 \{}
\DoxyCodeLine{45     \textcolor{keywordflow}{while}(1)}
\DoxyCodeLine{46     \{}
\DoxyCodeLine{47         \textcolor{comment}{//if start\_with has been used, start by launching this function}}
\DoxyCodeLine{48         \textcolor{keywordflow}{if} (SW)}
\DoxyCodeLine{49         \{}
\DoxyCodeLine{50             \mbox{\hyperlink{classuics__state_a036564ebb10a103182a79d9a5b40b748_a036564ebb10a103182a79d9a5b40b748}{execute}}(SW\_fname.c\_str());}
\DoxyCodeLine{51         \}}
\DoxyCodeLine{52         \textcolor{keywordtype}{int} out = getNextConnection(sockfd);}
\DoxyCodeLine{53 }
\DoxyCodeLine{54         \textcolor{keywordflow}{if} (out==0)}
\DoxyCodeLine{55         \{}
\DoxyCodeLine{56             \textcolor{keywordflow}{if} (!cmd2exec)}
\DoxyCodeLine{57             \{}
\DoxyCodeLine{58                 \textcolor{comment}{//std::cout<<"super problem!!"<<std::endl;}}
\DoxyCodeLine{59                 log\_state\_transition(\textcolor{stringliteral}{"Major issue."});}
\DoxyCodeLine{60             \}}
\DoxyCodeLine{61             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{62                 \textcolor{keywordflow}{if} (isInList(cmd2exec-\/>name))}
\DoxyCodeLine{63                 \{}
\DoxyCodeLine{64                     \mbox{\hyperlink{classuics__state_a036564ebb10a103182a79d9a5b40b748_a036564ebb10a103182a79d9a5b40b748}{execute}}(cmd2exec-\/>name.c\_str());}
\DoxyCodeLine{65                     \textcolor{keywordflow}{if} (eOO)}
\DoxyCodeLine{66                     \{}
\DoxyCodeLine{67                         log\_state\_transition(\textcolor{stringliteral}{"Transition "} +std::to\_string(myHandle-\/>nextState)+\textcolor{stringliteral}{"-\/>"}+std::to\_string(eOOnextState));}
\DoxyCodeLine{68                         myHandle-\/>nextState = eOOnextState;}
\DoxyCodeLine{69                     \}}
\DoxyCodeLine{70                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{71                 \}}
\DoxyCodeLine{72                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{73                 \{}
\DoxyCodeLine{74                     log\_state\_transition(\textcolor{stringliteral}{"function not recognized"});}
\DoxyCodeLine{75                     sndMsg(cmd2exec-\/>sockfd,\textcolor{stringliteral}{"function not recognized"},nidcsCMD\_ERR\_NOT\_SUPPORTED);}
\DoxyCodeLine{76                 \}}
\DoxyCodeLine{77             \}}
\DoxyCodeLine{78         \}}
\DoxyCodeLine{79         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (out==EXIT) \{\textcolor{keywordflow}{break};\}}
\DoxyCodeLine{80     \}}
\DoxyCodeLine{81 \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=315pt]{classuics__state_aa0723e76e6901b77c1654c3d8ca76b14_aa0723e76e6901b77c1654c3d8ca76b14_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/noboru/\+Documents/\+Ude\+M/\+Hx\+R\+G-\/\+S\+E\+R\+V\+E\+R2/\+U\+I\+C\+S/src/uics\+\_\+state.\+h\item 
/home/noboru/\+Documents/\+Ude\+M/\+Hx\+R\+G-\/\+S\+E\+R\+V\+E\+R2/\+U\+I\+C\+S/src/uics\+\_\+state.\+cpp\end{DoxyCompactItemize}
